<html>
   
    <head>       
        <title>MuPlay</title>
        <meta charset="utf-8">        
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="js/jquery-3.3.1.min.js"></script>
        <link  rel="stylesheet" type="text/css" href="css/style.css">
    </head>
    
    <body>  
        <div>    
            <audio controls src="" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
            // music next and prev song
            <div class="music-control">
                <div class="music-control__backward" id="backward">
                    <img src="https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/backward.svg" alt="Backward">
                </div>
                <div class="music-control__forward" id="forward">
                    <img src="https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/forward.svg" alt="Forward">
                </div>
            </div>     
        </div> 
        <script>              
            //array containing the names of the songs/pictures
            var names = ["Boy", "EmptyCups", "LaGirls", "Patient", "SlowItDown", "SomebodyToldMe", "ThroughItAll"];
            //index variable to run through the songs
            var index = 0;     
            //initialize variable bgimg(background image), style(body style css) and songName(name of the song),  to empty string
            var bgimg = "", songName = "";  
            //get the audio element
            var Audio = $('audio')[0];
            console.log(Audio);
            //set volume to 50%
            Audio.volume = 0.2;
            //load the background image
            loadBack();       
            //play the first song
            playSong();
            //when the song ends, update bgimg, style, songName and load again by calling loadNew function
            Audio.onended = function () {
                loadNew();
            }; 
            function loadBack(){                
                //set background image variable
                bgimg = "images/charliePuth"+names[index]+".png";
                console.log(bgimg);
                //set the background image getting the name from names array
                $('div').css("background-image", 'url(\"'+bgimg+'\")'); 
            }
            function playSong() {
                console.log("Inside playSong()");
                //set songName variable from the names array
                songName = "audio/charliePuth"+names[index]+".mp3";
                console.log(songName);
                //set the audio source with name from names array
                Audio.src = "";
                Audio.src = songName;
                //load the song
                Audio.load();
                //play the song
                //Audio.autoplay = true;
                //Audio.play();
                Audio.addEventListener('canplay', function() { this.play(); } );
            }   
            function loadNew() {            
                //increment index variable
                index++;  
                //if index is less than size of the names array i.e. the current song has completed playing
                if(index < names.length){
                    loadBack();
                    playSong();
                }
                else{
                    alert("Playlist Over!!!");
                }
            }
        </script>    
    </body>
</html>
